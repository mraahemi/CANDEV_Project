var _kfDebug=!1,kfRemoteDomain=_kfDebug?"http://localhost:8888":"https://www.usefig.com";!function(){function e(){window.fig=window.fig||function(){(window.fig.e=window.fig.e||[]).push(arguments)},window.fig.reset=function(e){var n=w();for(var a in e)n[a]=e[a];fig(n);var o=document.getElementById("kfPillContainer");o&&o.parentNode.removeChild(o);var i=document.getElementById("kfModal");i&&i.parentNode.removeChild(i),t()}}function t(){var e=w();return e.email?(B(),m(),void n()):void console.error("Error: KissFeedback requires an 'email' to be provided.")}function n(e){e=e||l();var t=document.getElementById("kfCanary"),o=t.currentStyle?t.currentStyle.display:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue("display"):null;"none"==o?(document.body.appendChild(e),a(e.children[0],c)):setTimeout(function(){n(e)},250)}function a(e,t){r("click",e,t)}function o(e,t){r("submit",e,t)}function i(e,t){r("blur",e,t)}function d(e,t){r("keyup",e,function(e){t(e||window.event)})}function r(e,t,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function l(){var e=b(),t=document.createElement("div");t.id="kfPillContainer";var n=document.createElement("div");n.innerHTML=w().text||"Feedback",n.id="kfPill",n.className="kfButton",n.style.background=e,t.appendChild(n);var a=w().position,o=w().animationSpeed||"0.5s";"topLeft"==a?(t.style.top=0,t.style.left=0,n.style.animation=o+" slide-down"):"topRight"==a?(t.style.top=0,t.style.right=0,n.style.animation=o+" slide-down"):"bottomLeft"==a?(t.style.bottom=0,t.style.left=0,n.style.animation=o+" slide-up"):(t.style.bottom=0,t.style.right=0,n.style.animation=o+" slide-up");var i=".kfButton:hover { background-color:"+E(e,-.3)+" !important; }";return i+=".kfButton:active { background-color:"+E(e,-.4)+" !important; }",i+=".kfButton.kfLoading { background-color:"+E(e,.3)+" !important; }",style=document.createElement("style"),style.styleSheet?style.styleSheet.cssText=i:style.appendChild(document.createTextNode(i)),document.getElementsByTagName("head")[0].appendChild(style),t}function c(e){var t=document.getElementById("kfModal")||m();t.style.display="block",document.getElementById("kfEmail").focus()}function m(){var e=document.createElement("div");e.id="kfModal",e.style.display="none",document.body.appendChild(e),a(e,function(t){t.target==e&&(e.style.display="none")});var t=document.createElement("div");t.id="kfModalContent",e.appendChild(t);var n=document.createElement("form");n.method="post",n.action=kfRemoteDomain+"/feedback",n.id="kfForm",t.appendChild(n),o(n,function(e){return e.preventDefault(),s()&&(N(n,g,y),k(!0)),!1});var r=document.createElement("header");r.innerHTML=w().prompt||"How can we help?",n.appendChild(r);var l=document.createElement("fieldset");n.appendChild(l);var c=document.createElement("input");c.type="email",c.name="from_email",c.placeholder="Your Email",c.className="kfField",c.autofocus=!0,c.id="kfEmail";var m=document.createElement("section");m.appendChild(c),l.appendChild(m),c.focus(),i(c,f);var u=document.createElement("div");u.className="kfRequirements",u.innerHTML="Must be a valid email address.",m.appendChild(u);var p=document.createElement("textarea");p.rows="4",p.placeholder="Message",p.className="kfField",p.name="message",p.id="kfTextArea";var h=document.createElement("section");h.appendChild(p),d(p,v),l.appendChild(h);var E=document.createElement("div");E.className="kfRequirements",E.innerHTML="Must not be empty.",h.appendChild(E);var C=document.createElement("footer");C.className="kfFooter",n.appendChild(C);var B=document.createElement("input");B.type="hidden",B.name="to_email",B.value=w().email,C.appendChild(B);var T=document.createElement("a");T.id="kfLogo",T.href=kfRemoteDomain,T.target="_blank",C.appendChild(T);var S=document.createElement("img");S.src=kfRemoteDomain+"/static/plugin/logo.png",S.width="25",S.alt="Fig logo",T.appendChild(S);var I=document.createElement("div");I.className="kfLogoText",I.innerHTML="Fig",T.appendChild(I);var M=document.createElement("div");M.id="kfError",M.innerHTML="Unexpected error occurred. Please try again later.",C.appendChild(M);var L=document.createElement("button");L.type="submit",L.innerHTML="Send",L.className="kfButton",L.id="kfSubmitButton",L.style.background=b(),C.appendChild(L),a(L,function(e){s()});var x=document.createElement("div");return x.id="kfCanary",e.appendChild(x),e}function u(){var e=document.getElementById("kfModal");e.className="kfSuccess",setTimeout(function(){e.parentNode.removeChild(e)},500)}function s(){document.getElementById("kfError").className="";var e=f();return p()&&e}function f(e){var t=document.getElementById("kfEmail"),n=/\S+@\S+\.\S+/,a=t.value&&t.value.trim();return a&&(t.value=a),!a&&e||n.test(t.value)?(t.className="kfField",!0):(t.className+=" kfInvalid",!1)}function p(){var e=document.getElementById("kfTextArea");return""==e.value.trim()?(e.className+=" kfInvalid",!1):(e.className="kfField",!0)}function v(){var e=document.getElementById("kfTextArea");e.className.includes("kfInvalid")&&p()}function k(e){var t=document.getElementById("kfEmail"),n=document.getElementById("kfTextArea"),a=document.getElementById("kfSubmitButton");t.disabled=e,n.disabled=e,a.disabled=e,a.innerHTML=e?"Sending...":"Send",e?a.className+=" kfLoading":a.className="kfButton"}function g(e){if("1"!=e.currentTarget.responseText)return void y(e);var t=document.getElementById("kfSubmitButton");t.innerHTML="Sent!",t.className+=" kfDone",setTimeout(u,500)}function y(e){k(!1),document.getElementById("kfError").className="kfShow"}function h(e){!C()||/in/.test(document.readyState)?setTimeout(function(){h(e)},250):e()}function E(e,t){var n=parseInt(e.slice(1),16),a=0>t?0:255,o=0>t?-1*t:t,i=n>>16,d=n>>8&255,r=255&n;return"#"+(16777216+65536*(Math.round((a-i)*o)+i)+256*(Math.round((a-d)*o)+d)+(Math.round((a-r)*o)+r)).toString(16).slice(1)}function C(){return void 0!==window.fig}function w(){var e=window.fig&&window.fig.e||[];return e.length>0?e[0][0]:{}}function b(){return w().color||"#0064cd"}function B(){T("kfTextStyle","https://fonts.googleapis.com/css?family=Pacifico"),T("kfFigStyle",kfRemoteDomain+"/static/plugin/fig.min.css")}function T(e,t){if(!document.getElementById(e)){var n=document.createElement("link");n.id=e,n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}}function N(e,t,n){var a=new XMLHttpRequest,o=[].filter.call(e.elements,function(e){return!(e.type in["checkbox","radio"])||e.checked}).filter(function(e){return!!e.name}).filter(function(e){return!e.disabled}).map(function(e){return encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)}).join("&");a.open("POST",e.action),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=t.bind(a),a.onerror=n&&n.bind(a),a.send(o)}e(),h(function(){t()}),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}();